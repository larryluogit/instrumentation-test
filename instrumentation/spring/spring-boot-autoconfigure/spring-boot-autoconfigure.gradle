group = 'io.opentelemetry.instrumentation'

apply from: "$rootDir/gradle/java.gradle"
apply from: "$rootDir/gradle/publish.gradle"

sourceCompatibility = '8'

dependencies {
  implementation "org.springframework.boot:spring-boot-autoconfigure:${versions.springboot}"
  annotationProcessor "org.springframework.boot:spring-boot-autoconfigure-processor:${versions.springboot}"
  implementation "javax.validation:validation-api:2.0.1.Final"

  implementation project(':instrumentation:spring:spring-web-3.1:library')
  implementation project(':instrumentation:spring:spring-webmvc-3.1:library')
  implementation project(':instrumentation:spring:spring-webflux-5.0:library')

  compileOnly "org.springframework.boot:spring-boot-starter-aop:${versions.springboot}"
  compileOnly "org.springframework.boot:spring-boot-starter-web:${versions.springboot}"
  compileOnly "org.springframework.boot:spring-boot-starter-webflux:${versions.springboot}"

  compileOnly deps.opentelemetryExtAnnotations
  compileOnly deps.opentelemetryLogging
  compileOnly deps.opentelemetryJaeger
  compileOnly deps.opentelemetryOtlp
  compileOnly deps.opentelemetryZipkin
  compileOnly "io.grpc:grpc-api:1.30.2"

  testImplementation "org.springframework.boot:spring-boot-starter-aop:${versions.springboot}"
  testImplementation "org.springframework.boot:spring-boot-starter-webflux:${versions.springboot}"
  testImplementation "org.springframework.boot:spring-boot-starter-web:${versions.springboot}"
  testImplementation("org.springframework.boot:spring-boot-starter-test:${versions.springboot}") {
    exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
  }

  testImplementation deps.assertj
  testImplementation project(':testing-common')
  testImplementation deps.opentelemetrySdk
  testImplementation deps.opentelemetrySdkTesting
  testImplementation deps.opentelemetryExtAnnotations
  testImplementation deps.opentelemetryLogging
  testImplementation deps.opentelemetryJaeger
  testImplementation deps.opentelemetryOtlp
  testImplementation deps.opentelemetryZipkin
  testImplementation "io.grpc:grpc-api:1.30.2"
  testImplementation "io.grpc:grpc-netty-shaded:1.30.2"
}
