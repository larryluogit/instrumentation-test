apply from: "${rootDir}/gradle/java.gradle"

dependencies {
  testCompile project(':auto-tooling')

  testCompile project(':exporter-adapters:jaeger-adapter')
  testCompile project(':exporter-adapters:logging-exporter-adapter')
}

tasks.withType(Test).configureEach() {
  dependsOn ':exporter-adapters:logging-exporter-adapter:shadowJar'
  dependsOn ':exporter-adapters:jaeger-adapter:shadowJar'
  doFirst {
    systemProperty 'projectVersion', allprojects.version[0]
    systemProperty 'adapterRoot', "${rootDir}/exporter-adapters"
    systemProperty 'loggingExporterJar', project(':exporter-adapters:logging-exporter-adapter').tasks.shadowJar.archivePath
    systemProperty 'jaegerExporterJar', project(':exporter-adapters:jaeger-adapter').tasks.shadowJar.archivePath
  }
}


