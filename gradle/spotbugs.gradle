allprojects {
  apply plugin: 'com.github.spotbugs'

  spotbugs {
    ignoreFailures = false
    reportLevel = "high"
    omitVisitors = ["FindDeadLocalStores"]
    effort = "max"
    excludeFilter = file("$rootDir/gradle/spotbugs-exclude.xml")
    toolVersion = '4.1.3'
  }

  spotbugsTest {
    reports {
      html.enabled = !isCI
      xml.enabled = isCI
      html {
        destination = file("$buildDir/reports/spotbugs/main.html")
        stylesheet = 'fancy-hist.xsl'
      }
    }
  }
  spotbugsMain {
    reports {
      html.enabled = !isCI
      xml.enabled = isCI
      html {
        destination = file("$buildDir/reports/spotbugs/main.html")
        stylesheet = 'fancy-hist.xsl'
      }
    }
  }
}
